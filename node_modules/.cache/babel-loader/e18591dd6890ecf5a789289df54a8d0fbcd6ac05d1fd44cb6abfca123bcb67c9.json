{"ast":null,"code":"import _slicedToArray from\"D:/New folder/insta-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import PostDetail from\"./PostDetail\";import\"./Profile.css\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfie(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var _useParams=useParams(),userid=_useParams.userid;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFollow=_useState2[0],setIsFollow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];// to follow user\nvar followUser=function followUser(userId){fetch(\"/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(data){console.log(data);setIsFollow(true);});};// to unfollow user\nvar unfollowUser=function unfollowUser(userId){fetch(\"/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){res.json();}).then(function(data){console.log(data);setIsFollow(false);});};useEffect(function(){fetch(\"/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}});},[isFollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pofile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:function onClick(){if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(function(pics){return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,alt:\"\"// onClick={() => {\n//     toggleDetails(pics)\n// }}\n,className:\"item\"},pics._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","PostDetail","useParams","jsx","_jsx","jsxs","_jsxs","UserProfie","picLink","_useParams","userid","_useState","_useState2","_slicedToArray","isFollow","setIsFollow","_useState3","_useState4","user","setUser","_useState5","_useState6","posts","setPosts","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","console","log","unfollowUser","concat","result","post","followers","includes","parse","_id","className","children","src","Photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","opacity","margin","map","pics","photo"],"sources":["D:/New folder/insta-clone/backend/frontend/src/Components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PostDetail from \"./PostDetail\";\r\nimport \"./Profile.css\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function UserProfie() {\r\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\r\n  const { userid } = useParams();\r\n  const [isFollow, setIsFollow] = useState(false);\r\n  const [user, setUser] = useState(\"\");\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  // to follow user\r\n  const followUser = (userId) => {\r\n    fetch(\"/follow\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n      body: JSON.stringify({\r\n        followId: userId,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        setIsFollow(true);\r\n      });\r\n  };\r\n\r\n  // to unfollow user\r\n  const unfollowUser = (userId) => {\r\n    fetch(\"/unfollow\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n      body: JSON.stringify({\r\n        followId: userId,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        setIsFollow(false);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${userid}`, {\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setUser(result.user);\r\n        setPosts(result.post);\r\n        if (\r\n          result.user.followers.includes(\r\n            JSON.parse(localStorage.getItem(\"user\"))._id\r\n          )\r\n        ) {\r\n          setIsFollow(true);\r\n        }\r\n      });\r\n  }, [isFollow]);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {/* Profile frame */}\r\n      <div className=\"profile-frame\">\r\n        {/* profile-pic */}\r\n        <div className=\"profile-pic\">\r\n          <img src={user.Photo ? user.Photo : picLink} alt=\"\" />\r\n        </div>\r\n        {/* profile-data */}\r\n        <div className=\"pofile-data\">\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n            }}\r\n          >\r\n            <h1>{user.name}</h1>\r\n            <button\r\n              className=\"followBtn\"\r\n              onClick={() => {\r\n                if (isFollow) {\r\n                  unfollowUser(user._id);\r\n                } else {\r\n                  followUser(user._id);\r\n                }\r\n              }}\r\n            >\r\n              {isFollow ? \"Unfollow\" : \"Follow\"}\r\n            </button>\r\n          </div>\r\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\r\n            <p>{posts.length} posts</p>\r\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\r\n            <p>{user.following ? user.following.length : \"0\"} following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr\r\n        style={{\r\n          width: \"90%\",\r\n\r\n          opacity: \"0.8\",\r\n          margin: \"25px auto\",\r\n        }}\r\n      />\r\n      {/* Gallery */}\r\n      <div className=\"gallery\">\r\n        {posts.map((pics) => {\r\n          return (\r\n            <img\r\n              key={pics._id}\r\n              src={pics.photo} alt=\"\"\r\n              // onClick={() => {\r\n              //     toggleDetails(pics)\r\n              // }}\r\n              className=\"item\"\r\n            ></img>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* {show &&\r\n        <PostDetail item={posts} toggleDetails={toggleDetails} />\r\n      } */}\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}